### **PostgreSQL – Resumen**

**Qué es:**  
PostgreSQL (o **Postgres**) es un **sistema de gestión de bases de datos relacional (RDBMS)** de código abierto, muy potente y con soporte para **consultas SQL avanzadas**, extensiones, y alta escalabilidad.

**Características principales:**

- Basado en **SQL estándar** con muchas extensiones propias.
- Soporta **tipos de datos avanzados** (JSON, arrays, UUID, XML, datos geoespaciales con PostGIS).
- Muy **seguro y robusto**, con control de transacciones (ACID).
- Maneja **relaciones complejas** (JOINs, foreign keys, constraints).
- Permite **procedimientos almacenados** y funciones con distintos lenguajes (SQL, PL/pgSQL, Python, etc.).
- Ideal para **grandes volúmenes de datos** y aplicaciones críticas.
- Compatible con múltiples **drivers y ORMs** (Sequelize, Prisma, TypeORM, etc.).

**Documentación oficial:**

- [https://www.postgresql.org/docs/](https://www.postgresql.org/docs/)

``` PostgreSQL

-- Crear base de datos / Create database
CREATE DATABASE blogdb;

-- Necesario para iniciar PostgreSQL   
\c blogdb

-- Crear tabla usuarios / Create users table
CREATE TABLE users (
	id SERIAL PRIMARY KEY,
	username VARCHAR(50) NOT NULL,
	email VARCHAR(100) UNIQUE NOT NULL,
	password VARCHAR(255) NOT NULL
);

Tipos de datos en PostgreSQL
1️⃣ Tipos numéricos
- SMALLINT: Entero pequeño (-32,768 a 32,767)
- INTEGER / INT: Entero estándar (-2,147,483,648 a 2,147,483,647)
- BIGINT: Entero grande (-9,223,372,036,854,775,808 a 9,223,372,036,854,775,807)
- SERIAL: Entero autoincremental (32 bits)
- BIGSERIAL: Entero autoincremental grande (64 bits)
- DECIMAL(p,s) / NUMERIC(p,s): Número exacto con precisión
- REAL: Número de punto flotante (4 bytes)
- DOUBLE PRECISION: Número de punto flotante (8 bytes)

2️⃣ Tipos de texto / cadenas
- CHAR(n): Cadena fija de longitud n
- VARCHAR(n): Cadena variable hasta n caracteres
- TEXT: Cadena de longitud ilimitada

3️⃣ Tipos de fecha y hora
- DATE: Solo fecha (YYYY-MM-DD)
- TIME: Solo hora (HH:MM:SS)
- TIMESTAMP: Fecha y hora (YYYY-MM-DD HH:MM:SS)
- TIMESTAMP WITH TIME ZONE: Fecha y hora con zona horaria
- INTERVAL: Intervalo de tiempo

4️⃣ Tipos booleanos y lógicos
- BOOLEAN: TRUE, FALSE, NULL

5️⃣ Tipos compuestos y avanzados
- ARRAY: Arreglo de cualquier tipo (INT[], TEXT[])
- JSON: Datos en formato JSON
- JSONB: JSON binario (más eficiente para consultas)
- UUID: Identificador único universal
- XML: Datos en formato XML
- GEOMETRY / GEOGRAPHY: Datos espaciales (PostGIS)

6️⃣ Tipos especiales
- SERIAL / BIGSERIAL: Enteros autoincrementales para claves primarias
- Restricciones importantes (no son tipos de dato, pero controlan valores):
  - PRIMARY KEY
  - UNIQUE
  - NOT NULL
  - CHECK

Tipos de restricciones (constraints) en SQL

1️⃣ PRIMARY KEY
- Identifica de manera única cada fila de la tabla.
- No permite NULL.
- Cada tabla puede tener solo una clave primaria.
- Ejemplo:
    id INT PRIMARY KEY

2️⃣ UNIQUE
- Garantiza que los valores sean únicos.
- Permite NULL si la columna lo permite.
- Se pueden tener varias columnas UNIQUE en la misma tabla.
- Ejemplo:
    email VARCHAR(100) UNIQUE

3️⃣ NOT NULL
- La columna no puede contener valores vacíos (NULL).
- Se puede combinar con otras restricciones.
- Ejemplo:
    username VARCHAR(50) NOT NULL

4️⃣ CHECK
- Define condiciones que los valores deben cumplir.
- Ejemplo:
    age INT CHECK (age >= 0)

5️⃣ DEFAULT
- Establece un valor por defecto si no se especifica en la inserción.
- Ejemplo:
    created_at TIMESTAMP DEFAULT NOW()

6️⃣ FOREIGN KEY
- Define una relación entre tablas (integridad referencial).
- La columna apunta a la clave primaria de otra tabla.
- Ejemplo:
    user_id INT REFERENCES users(id)

🔹 Combinaciones posibles
- Una columna puede tener múltiples restricciones:
    email VARCHAR(100) UNIQUE NOT NULL
- Una tabla puede tener restricciones a nivel columna o tabla:
    CREATE TABLE orders (
        id SERIAL PRIMARY KEY,
        user_id INT NOT NULL,
        total DECIMAL(10,2) CHECK (total > 0),
        CONSTRAINT fk_user FOREIGN KEY (user_id) REFERENCES users(id)
    );


-- Insertar datos / Insert data
INSERT INTO users (username, email, password)
VALUES ('Jose', 'jose@example.com', 'hashedpassword');

-- Insertar varios datos
INSERT INTO users (user, email, password)
VALUES
	('Jose', 'Jose@example.com', '1234'),
	('J', 'J@example.com', '1234'),
	('Jo', 'Jo@example.com', '1234');

-- Seleccionar datos / Select data
SELECT * FROM users;

-- Actualizar datos / Update data
UPDATE users SET email = 'newemail@example.com' WHERE id = 1;

-- Eliminar datos / Delete data
DELETE FROM users WHERE id = 1;

´´´